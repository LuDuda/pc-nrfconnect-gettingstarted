{
    "type": "Recipe",
    "title": "Install the Zephyr SDK",
    "tool": "linux_zephyr_sdk-0.9.5",
    "platforms": { "platform": "linux" },
    "description": [
        "The Zephyr Softare Development Kit (SDK) contains all necessary tools and cross-compilers that are needed to build the kernel on all supported architectures. See the [Zephyr documentation](https://docs.zephyrproject.org/latest/getting_started/installation_linux.html#install-the-zephyr-software-development-kit-sdk) for more information about the SDK.",
        "The Zephyr SDK is not required, but we recommend using the Zephyr SDK instead of installing the compiler toolchain separately.",
        "Complete the following steps to install the SDK on your system:"
    ],
    "checkables": [
        {
            "type": "Checkable",
            "steps": [
                {
                    "type": "Step",
                    "platforms": { "platform": "linux" },
                    "title": "Download",
                    "description": [
                        "Download the latest Zephyr SDK as a self-extracting installation binary. Check the [Zephyr Downloads](https://www.zephyrproject.org/developers/#downloads) page to find out what is the latest version. For example, enter the following command to install version 0.9.3:",
                        {
                            "type": "commands",
                            "description": [
                                "wget https://github.com/zephyrproject-rtos/meta-zephyr-sdk/releases/download/0.9.3/zephyr-sdk-0.9.3-setup.run"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Checkable",
            "steps": [
                {
                    "type": "Step",
                    "platforms": { "platform": "linux" },
                    "title": "Run the installer",
                    "description": [
                        "Install the Zephyr SDK by entering the following commands:",
                        {
                            "type": "commands",
                            "description": [
                                "cd <Zephyr SDK download directory>",
                                "sh zephyr-sdk-0.9.3-setup.run"
                            ]
                        }
                    ]
                },
                {
                    "type": "Step",
                    "platforms": { "platform": "linux" },
                    "title": "Follow installation instructions",
                    "description": [
                        "Follow the installation instructions on the screen.",
                        "The default installation location is `/opt/zephyr-sdk/`, but we recommend to install the Zephyr SDK under your home directory instead. If you want to install the Zephry SDK in the default location, you must run the installation binary as root."
                    ]
                }
            ]
        },
        {
            "type": "Checkable",
            "steps": [
                {
                    "type": "Step",
                    "platforms": { "platform": "linux" },
                    "title": "Set up Zephyr SDK environment variables",
                    "description": [
                        "Export the following environment variables, replacing <Zephyr SDK installation directory> with the folder where you installed the Zephyr SDK:",
                        {
                            "type": "commands",
                            "description": [
                                "export ZEPHYR_TOOLCHAIN_VARIANT=zephyr",
                                "export ZEPHYR_SDK_INSTALL_DIR=<Zephyr SDK installation directory>"
                            ]
                        },
                        "Note that in previous releases of Zephyr, the `ZEPHYR_TOOLCHAIN_VARIANT` variable was called `ZEPHYR_GCC_VARIANT`."
                    ]
                }
            ]
        },
        {
            "type": "Checkable",
            "steps": [
                {
                    "type": "Step",
                    "platforms": { "platform": "linux" },
                    "title": "Set up cmake environment variables",
                    "description": [
                        "Some Linux distributions define default `CFLAGS` and `CXXFLAGS` environment variables. These variables must be unset to prevent them from interfering with cmake. To do so, enter the following command:",
                        {
                            "type": "commands",
                            "description": [
                                "unset CFLAGS CXXFLAGS"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Checkable",
            "steps": [
                {
                    "type": "Step",
                    "platforms": { "platform": "linux" },
                    "title": "Create .zephyrrc",
                    "description": [
                        "Instead of setting the environment variables every time you start a new session, define them in the file `${HOME}/.zephyrrc`. To do so, enter the following command, replacing <Zephyr SDK installation directory> with the folder where you installed the Zephyr SDK:",
                        {
                            "type": "commands",
                            "description": [
                                "cat <<EOF > ~/.zephyrrc",
                                "export ZEPHYR_TOOLCHAIN_VARIANT=zephyr",
                                "export ZEPHYR_SDK_INSTALL_DIR=<Zephyr SDK installation directory>",
                                "EOF"
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}
